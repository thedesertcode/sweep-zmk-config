# Enable split
CONFIG_ZMK_SPLIT=y
#CONFIG_ZMK_SPLIT_ROLE_CENTRAL=y
# Set halves connectivity via BLE
CONFIG_ZMK_SPLIT_BLE=y
# Enable USB mode connectivity
CONFIG_ZMK_USB=y

# Bluetooth
# Maximum connections
CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5
# Future default improvements
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y
# Enhanced security/stability
CONFIG_ZMK_BLE_EXPERIMENTAL_SEC=y
# The report queue size increase helps with burst typing performance
CONFIG_ZMK_BLE_KEYBOARD_REPORT_QUEUE_SIZE=30
# Disable 2Mbps PHY for Intel/Realtek chips
CONFIG_BT_CTLR_PHY_2M=n
# Improves Windows pairing reliability
CONFIG_ZMK_BLE_PASSKEY_ENTRY=y
# Ultra-responsive BLE
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y
# Reduce latency to minimal (7.5ms)
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12	
# Lower thread priority (lower number = higher priority)
CONFIG_ZMK_BLE_THREAD_PRIORITY=5

# Set USB polling speed to 1000Hz
CONFIG_USB_HID_POLL_INTERVAL_MS=1
# Enable full NKRO
CONFIG_ZMK_HID_REPORT_TYPE_NKRO=y

# Battery
# Enable battery reporting to host
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=600
# Enable battery reporting from right halve
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
# Go to sleep after 30 seconds of idle
CONFIG_ZMK_IDLE_TIMEOUT=30000

# Enable sleep
CONFIG_ZMK_SLEEP=y
# Go to deep sleep after 30 minutes
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=1800000

# Soft off with &soft_off key
CONFIG_ZMK_PM_SOFT_OFF=y

# Enable mouse
CONFIG_ZMK_POINTING=y

# Macros
# Optimized for 34-key combo-heavy layouts
CONFIG_ZMK_BEHAVIORS_QUEUE_SIZE=128
# Increase from default 4
CONFIG_ZMK_COMBO_MAX_PRESSED_COMBOS=6
# Support complex combo schemes
CONFIG_ZMK_COMBO_MAX_COMBOS_PER_KEY=8
# Enable send-string behavior (for macros to report battery level of each halve)
#CONFIG_ZMK_SEND_STRING_BEHAVIOR=y

# Enable ZMK Studio
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCK_IDLE_TIMEOUT_SEC=300

# Force to use direct pin mode
CONFIG_ZMK_KSCAN_DIRECT_POLLING=n

# Ensure adequate memory for queues
CONFIG_HEAP_MEM_POOL_SIZE=8192
CONFIG_ZMK_KEYBOARD_NAME="sparrow kbd"
